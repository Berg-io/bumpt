# =============================================
# bum.pt - Configuration
# =============================================
# Copy this file to .env and adjust the values

# --- Database ---
# Type: sqlite (default), postgresql, mariadb, mssql
# COMPOSE_PROFILES automatically starts the DB container in Docker:
#   - sqlite / mssql  → no DB container (leave empty)
#   - postgresql       → COMPOSE_PROFILES="postgresql"
#   - mariadb          → COMPOSE_PROFILES="mariadb"
COMPOSE_PROFILES=""
DB_TYPE="sqlite"

# --- SQLite (default, no DB container) ---
DATABASE_URL="file:./dev.db"

# --- PostgreSQL (Docker container included) ---
# Uncomment this entire block to use PostgreSQL:
# COMPOSE_PROFILES="postgresql"
# DB_TYPE="postgresql"
# DATABASE_URL="postgresql://bumpt:password@postgresql:5432/bumpt?schema=public"
# DB_HOST="postgresql"
# DB_PORT="5432"
# DB_NAME="bumpt"
# DB_USER="bumpt"
# DB_PASSWORD="password"
# DB_SSL="false"

# --- MariaDB (Docker container included) ---
# Uncomment this entire block to use MariaDB:
# COMPOSE_PROFILES="mariadb"
# DB_TYPE="mariadb"
# DATABASE_URL="mysql://bumpt:password@mariadb:3306/bumpt"
# DB_HOST="mariadb"
# DB_PORT="3306"
# DB_NAME="bumpt"
# DB_USER="bumpt"
# DB_PASSWORD="password"
# DB_SSL="false"

# --- Microsoft SQL Server (external, Windows server) ---
# No Docker container — connects to an existing MSSQL server:
# DB_TYPE="mssql"
# DATABASE_URL="sqlserver://myserver.local:1433;database=bumpt;user=sa;password=password;encrypt=true;trustServerCertificate=true"
# DB_HOST="myserver.local"
# DB_PORT="1433"
# DB_NAME="bumpt"
# DB_USER="sa"
# DB_PASSWORD="password"
# DB_SSL="true"

# --- Authentication / JWT ---
JWT_SECRET="change-this-to-a-secure-random-string-in-production"
JWT_EXPIRY="24h"
BCRYPT_SALT_ROUNDS="12"
# If true, container startup aborts when insecure secrets are detected in production.
STRICT_ENV_VALIDATION="false"

# --- Super Admin account (created on first launch) ---
ADMIN_EMAIL="admin@bumpt.local"
ADMIN_PASSWORD="admin123"

# --- Application ---
NEXT_PUBLIC_APP_NAME="bum.pt"
APP_LANGUAGE="en"
APP_PORT="3000"

# --- Cron / Scheduled checks ---
CRON_SECRET="change-this-to-a-secure-random-string-in-production"
CRON_SCHEDULE="0 0 */6 * * *"

# --- Demo data (true/false) ---
SEED_DEMO_DATA="false"

# --- bum.pt License ---
# Signed license key (provided after purchase at bum.pt)
# Without a key = Community Edition (max 25 items, no SSO, no API keys)
LICENSE_KEY=""

# --- GitHub API (optional, increases API rate limits) ---
GITHUB_TOKEN=""

# --- Winget API (optional) ---
WINGET_API_KEY=""

# --- GitLab API (optional, increases API rate limits) ---
GITLAB_TOKEN=""

# --- Bitbucket API (optional, required for Bitbucket source) ---
# Format: username:app_password (create at https://bitbucket.org/account/settings/app-passwords/)
BITBUCKET_TOKEN=""

# --- NVD / NIST API (optional, increases CVE lookup rate limits) ---
NVD_API_KEY=""

# --- Libraries.io API (optional, paid — cross-platform package version tracking) ---
# Get your API key at https://libraries.io/account
LIBRARIES_IO_API_KEY=""

# --- VulnDB / Flashpoint API (optional, paid — enhanced vulnerability intelligence) ---
# Provides enriched CVE data beyond NVD. Requires a VulnDB subscription.
VULNDB_CLIENT_ID=""
VULNDB_CLIENT_SECRET=""

# --- AI Enrichment (optional, Professional only) ---
# Provider: "openai", "anthropic", "mistral", "self_hosted", or "" (disabled)
# Generic provider-agnostic overrides:
# AI_ENRICHMENT_ENABLED=true
# AI_API_KEY=...
# AI_MODEL=...
# AI_TIMEOUT=30000
# AI_MAX_RETRIES=2
# AI_QUOTA_PER_RUN=200
# AI_PROMPT_TEMPLATE=Custom prompt template with placeholders (optional)
AI_PROVIDER=""
AI_OPENAI_KEY=""
AI_OPENAI_MODEL=""
AI_ANTHROPIC_KEY=""
AI_ANTHROPIC_MODEL=""
AI_MISTRAL_KEY=""
AI_MISTRAL_MODEL=""
AI_SELF_HOSTED_URL=""
AI_SELF_HOSTED_KEY=""
AI_SELF_HOSTED_MODEL=""

# --- Reverse Proxy Caddy ---
# Domain used by Caddy (e.g. ver.domain.local, bumpt.example.com)
CADDY_DOMAIN="localhost"
# HTTP / HTTPS ports exposed on the host
CADDY_HTTP_PORT="80"
CADDY_HTTPS_PORT="443"
# Email for Let's Encrypt (only if TLS = letsencrypt in the Caddyfile)
CADDY_TLS_EMAIL=""

# --- CORS (optional) ---
# Allowed origins for external API calls, separated by commas.
# WARNING: Using "*" allows any website to call your API. Set specific origins in production.
# CORS_ALLOWED_ORIGINS="https://app.example.com,https://other.example.com"
CORS_ALLOWED_ORIGINS=""

# --- Webhooks / Notifications (optional, Professional only) ---
# Pre-configure webhooks via env vars (created on first launch if not already in DB)
# Leave empty to configure via the UI instead
WEBHOOK_SLACK_URL=""
WEBHOOK_DISCORD_URL=""
WEBHOOK_TEAMS_URL=""
WEBHOOK_CUSTOM_URL=""
WEBHOOK_CUSTOM_SECRET=""
WEBHOOK_EMAIL_RECIPIENTS=""
# Events to subscribe to (comma-separated, applies to all env-defined webhooks)
# Available: version.new, version.critical, cve.detected, item.eol, check.failed
WEBHOOK_EVENTS="version.new,version.critical,cve.detected,check.failed"

# --- Email / SMTP (optional, Professional only) ---
# Configure SMTP to enable email notifications
SMTP_HOST=""
SMTP_PORT="587"
SMTP_SECURE="false"
SMTP_USER=""
SMTP_PASSWORD=""
SMTP_FROM="bum.pt <noreply@example.com>"

# --- MCP stdio client (optional, Professional only) ---
# Used only by the standalone stdio script (src/mcp/stdio.ts) for IDE integration.
# The HTTP transport (/api/mcp) uses the standard x-api-key header instead.
# MCP_API_URL="http://localhost:3000"
# MCP_API_KEY=""

# --- SAML / SSO (optional, Professional only) ---
SAML_ENABLED="false"
SAML_ENTITY_ID=""
SAML_SSO_URL=""
SAML_CERTIFICATE=""
SAML_CALLBACK_URL=""
SAML_BUTTON_LABEL=""
SAML_IMAGE_URL=""

# --- OpenID Connect (optional) ---
OIDC_ENABLED="false"
OIDC_CLIENT_ID=""
OIDC_CLIENT_SECRET=""
OIDC_ISSUER=""
OIDC_CALLBACK_URL=""
OIDC_SCOPE="openid profile email"
OIDC_BUTTON_LABEL=""
OIDC_IMAGE_URL=""
